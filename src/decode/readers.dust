define(['capnp-js/encode/primitives', 'capnp-js/decode', './scope', './constants'], function (
                  encode,                       decode,     scope,     constants) {

    {!
     ! TODO: Bring in the `readers.js` files from other directories that contain
     ! this file's imports to assure that the corresponding prototype methods
     ! get installed.
     !}

    {!
     ! Compiler dumps `./rpc.js` and `./rpcMethods.js.stub` (stubbed out RPC
     ! methods).  The `./rpcMethods.js` file gets imported by `./rpc.js`.
     !}

    {! Populate prototypes and assign pet-names. !}

    var nodes = {};

    {#.nodes}
        {@eq key=.meta value="const"}
            nodes.{@constant name=.name/} = {>"readers/node"/};
        {:else}
            nodes.{.name} = {>"readers/node"/};
        {/eq}
    {/.nodes}

    return nodes;
});
